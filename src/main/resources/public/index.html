<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>UNO Game</title>
  <link href="https://cdn.jsdelivr.net/npm/quasar@2/dist/quasar.prod.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/quasar@2/dist/quasar.umd.prod.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/socket.io-client/dist/socket.io.min.js" defer></script>
</head>
<body>
  <div id="q-app">
    <q-layout view="lHh Lpr lFf">
      <q-header elevated class="bg-primary text-white">
        <q-toolbar>
          <q-toolbar-title>UNO Multiplayer</q-toolbar-title>
        </q-toolbar>
      </q-header>
      <q-page-container>
        <q-page class="q-pa-md">
          <div v-if="!connected" class="q-gutter-md">
            <q-input v-model="playerName" label="Player name" />
            <q-btn color="primary" label="Connect" @click="connect" :disable="!playerName" />
          </div>
          <div v-else class="q-gutter-md">
            <div>
              <q-btn color="green" label="Ready" v-if="!ready" @click="sendReady" />
            </div>
            <div class="row q-mt-md">
              <div class="col-12 col-md-3">
                <q-card>
                  <q-card-section>
                    <div class="text-subtitle2">Deck</div>
                    <div>{{ deckCount }} cards</div>
                    <div class="q-mt-sm">Top card: {{ topCard }}</div>
                  </q-card-section>
                </q-card>
              </div>
              <div class="col-12 col-md-9">
                <q-card>
                  <q-card-section>
                    <div class="text-subtitle2">Players</div>
                    <div v-for="p in players" :key="p.name">
                      {{ p.name }}: {{ p.cards }}
                    </div>
                  </q-card-section>
                </q-card>
              </div>
            </div>
            <div class="q-mt-md">
              <div class="text-subtitle2">Your hand</div>
              <div class="row q-col-gutter-sm">
                <div class="col-auto" v-for="(card, idx) in hand" :key="idx">
                  <q-chip :label="card" color="primary" text-color="white" @click="playCard(idx)" />
                </div>
              </div>
            </div>
            <div v-if="colorSelectVisible" class="q-mt-md">
              <div class="text-subtitle2">Choose color</div>
              <q-btn color="red" class="q-mr-sm" label="Red" @click="chooseColor('RED')" />
              <q-btn color="blue" class="q-mr-sm" label="Blue" @click="chooseColor('BLUE')" />
              <q-btn color="green" class="q-mr-sm" label="Green" @click="chooseColor('GREEN')" />
              <q-btn color="yellow" label="Yellow" @click="chooseColor('YELLOW')" />
            </div>
            <div class="q-mt-md">
              <div v-for="m in messages" :key="m">{{ m }}</div>
            </div>
          </div>
        </q-page>
      </q-page-container>
    </q-layout>
  </div>
  <script src="js/client.js" defer></script>
</body>
</html>
